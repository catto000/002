# Sender

#include <stdio.h> 
#include <stdlib.h> 
#include <string.h> 
#include <unistd.h> 
#include <fcntl.h> 
#include <sys/types.h> 
#include <sys/stat.h> 
#define PIPE1 "/tmp/pipel" 
#define PIPE2 "/tmp/pipe2" 
int main() { 
int fd1, fd2; 
char input[1000], output[1000]; 
// Create the named pipes 
mkfifo(PIPE1, 0666); 
mkfifo(PIPE2, 0666); 
// Get user input 
printf("Enter a sentence (type 'exit' to quit):"); 
fgets(input, sizeof(input), stdin); 
if (strncmp(input, "exit", 4)==0) { 
return 0; } 
// Open PIPE! for writing 
fd1= open(PIPE1, O_WRONLY); 
write(fd1, input, strlen(input) + 1); 
close(fd1); 
// Open PIPE2 for reading 
fd2= open(PIPE2, O_RDONLY); 
read(fd2, output, sizeof(output)); 
close(fd2); 
// Print the output received from the second process 
printf("Output from second process:%s\n", output); 
// Remove the named pipes 
unlink(PIPE1); 
unlink(PIPE2); 
return 0;} 

#reciver
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>

#define PIPE1 "/tmp/pipe1"
#define PIPE2 "/tmp/pipe2"

// Function to count words
int countWords(const char *str) {
    int count = 0, inWord = 0;
    for (int i = 0; str[i] != '\0'; i++) {
        if (str[i] == ' ' || str[i] == '\n' || str[i] == '\t')
            inWord = 0;
        else if (inWord == 0) {
            inWord = 1;
            count++;
        }
    }
    return count;
}

// Function to count lines
int countLines(const char *str) {
    int count = 1; // start with 1 line by default
    for (int i = 0; str[i] != '\0'; i++) {
        if (str[i] == '\n')
            count++;
    }
    return count;
}

int main() {
    int fd1, fd2;
    char input[1000], output[1000];
    int charCount, wordCount, lineCount;
    FILE *file;

    // Create named pipes if not already existing
    mkfifo(PIPE1, 0666);
    mkfifo(PIPE2, 0666);

    // Open PIPE1 for reading
    fd1 = open(PIPE1, O_RDONLY);
    read(fd1, input, sizeof(input));
    close(fd1);

    // Count characters, words, and lines
    charCount = strlen(input);
    wordCount = countWords(input);
    lineCount = countLines(input);

    // Write results to a file
    file = fopen("output.txt", "w");
    fprintf(file, "Characters: %d\nWords: %d\nLines: %d\n",
            charCount, wordCount, lineCount);
    fclose(file);

    // Read file content into output buffer
    file = fopen("output.txt", "r");
    fread(output, sizeof(char), sizeof(output), file);
    fclose(file);

    // Open PIPE2 for writing and send data
    fd2 = open(PIPE2, O_WRONLY);
    write(fd2, output, strlen(output) + 1);
    close(fd2);

    return 0;
}
